---
# DHCP Role - Main Tasks

- name: "ğŸ“¦ Install ISC DHCP Server"
  apt:
    name: isc-dhcp-server
    state: present
    update_cache: yes
  tags: [packages]

- name: "âš™ï¸ Configure DHCP Server"
  template:
    src: dhcpd.conf.j2
    dest: /etc/dhcp/dhcpd.conf
    mode: '0644'
    backup: yes
  notify: restart isc-dhcp-server
  tags: [config]

- name: "âš™ï¸ Configure DHCP Interface"
  lineinfile:
    path: /etc/default/isc-dhcp-server
    regexp: '^INTERFACESv4='
    line: 'INTERFACESv4="ens18"'
  notify: restart isc-dhcp-server
  tags: [config]

- name: "ğŸš€ Enable and Start DHCP Service"
  systemd:
    name: isc-dhcp-server
    enabled: yes
    state: started
  tags: [service]
